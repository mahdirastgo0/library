{% load static %}

{% include 'header_refrences.html' %}


<body data-bs-spy="scroll" data-bs-target="#header" tabindex="0">

{% include 'header.html' %}

<section id="billboard">

    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <button class="prev slick-arrow">
                    <i class="icon icon-arrow-left"></i>
                </button>

                <div class="main-slider pattern-overlay">
                    {% for book in books %}
                        <div class="slider-item">
                            <div class="banner-content">
                                <h2 class="banner-title">{{ book.title }}</h2>
                                <p>{{ book.description }}</p>
                            </div>
                            {% if book.image %}
                                <img src="{{ book.image.url }}" alt="{{ book.title }}" class="banner-image">
                            {% else %}
                                <img src="{% static 'images/blank-profile.jpg' %}" alt="No image available"
                                     class="banner-image">
                            {% endif %}

                        </div><!--slider-item-->
                    {% endfor %}


                </div><!--slider-->

                <button class="next slick-arrow">
                    <i class="icon icon-arrow-right"></i>
                </button>

            </div>
        </div>
    </div>

</section>


<section id="featured-books" class="py-5 my-5">
    <div class="container">
        <div class="row">
            <div class="col-md-12">

                <div class="section-header align-center">
                    <div class="title">
                        <span>Some quality items</span>
                    </div>
                    <h2 class="section-title">Featured Books</h2>
                </div>

                <div class="product-list" data-aos="fade-up">
                    <div class="row">
                        {% for book in featured_books %}
                            <div class="col-md-3">
                                <div class="product-item">
                                    <figure class="product-style">
                                        <img src="{{ book.image.url }}" alt="{{ book.image }}" class="product-item">
                                        <div class="action-buttons">
                                            {% if book.status != 'sold' %}
                                                <button class="add-to-cart"
                                                        data-book-id="{{ book.book_id }}"
                                                        data-csrf="{{ csrf_token }}">
                                                    <i class="bi bi-cart-plus"></i> افزودن به سبد
                                                </button>
                                            {% else %}
                                                <div class="out-of-stock"
                                                     style="display: flex; align-items: center; justify-content: center; gap: 5px;">
                                                    <i class="bi bi-x-circle"></i>
                                                    <span>موجود نیست</span>
                                                </div>
                                            {% endif %}
                                        </div>
                                    </figure>
                                    <figcaption>
                                        <h3>{{ book.title }}</h3>
                                        <span>{{ book.author }}</span>
                                        <br>
                                        {% if book.discounted_price and book.discounted_price < book.price %}
                                            <span class="prev-price">${{ book.price }}</span>
                                            ${{ book.discounted_price }}
                                            <span class="discount-badge">-{{ book.discount_percentage }}%</span>
                                        {% else %}
                                            ${{ book.price }}
                                        {% endif %}
                                    </figcaption>
                                </div>
                            </div>
                        {% endfor %}
                    </div><!-- row -->
                </div><!-- product-list -->


            </div><!--inner-content-->
        </div>
    </div>
</section>

<section id="best-selling" class="leaf-pattern-overlay">
    <div class="corner-pattern-overlay"></div>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-6">
                        {% for book in best_sellers %}
                            {% if book.image %}
                                <div class="product-style">
                                    <img src="{{ book.image.url }}" alt="{{ book.title }}" class="product-image">

                                    {% if book.status == 'sold' %}
                                        <div class="out-of-stock-best-selling">
                                            <i class="bi bi-x-circle"></i>
                                            <span>موجود نیست</span>
                                        </div>
                                    {% else %}
                                        <button class="add-to-cart"
                                                data-book-id="{{ book.book_id }}"
                                                data-csrf="{{ csrf_token }}"
                                                data-url="{% url 'library:add_to_cart' 0 %}">
                                            <i class="bi bi-cart-plus"></i> افزودن به سبد
                                        </button>
                                    {% endif %}
                                </div>
                            {% else %}
                                <figure class="products-thumb">
                                    <img src="{% static 'images/blank-profile.jpg' %}" alt="No image"
                                         class="book-image">
                                </figure>
                            {% endif %}
                        {% endfor %}
                    </div>

                    <div class="col-md-6">
                        <div class="product-entry">
                            <h2 class="section-title divider"> Top selling Book</h2>

                            <div class="products-content">
                                {% for book in best_sellers %}
                                    <div class="book-item">
                                    <h3>{{ book.title }}</h3>
                                    <p>{{ book.author.name }}</p>
                                    {% if book.discounted_price and book.discounted_price < book.price %}
                                        <span class="prev-price">${{ book.price }}</span>
                                        ${{ book.discounted_price }}
                                        <span class="discount-badge">-{{ book.discount_percentage }}%</span>
                                    {% else %}
                                        ${{ book.price }}
                                    {% endif %}
                                    <p>{{ book.status }}</p>
                                {% empty %}
                                    <p>No Books to be Shown</p>
                                {% endfor %}
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
                <!-- / row -->

            </div>

        </div>
    </div>
</section>

<section id="popular-books" class="bookshelf py-5 my-5">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="section-header align-center">
                    <div class="title">
                        <span>Some quality items</span>
                    </div>
                    <h2 class="section-title">Popular Books</h2>
                </div>

                <!-- Genre Tabs -->
                <ul class="tabs">
                    <li data-tab-target="#all-genre" class="tab {% if not selected_genre %}active{% endif %}">All
                        Genre
                    </li>
                    {% for genre in genres %}
                        <li data-tab-target="#{{ genre.name|slugify }}"
                            class="tab {% if selected_genre == genre.name %}active{% endif %}">
                            {{ genre.name }}
                        </li>
                    {% endfor %}
                </ul>

                <!-- Tab Content -->
                <div class="tab-content">
                    <form method="get" action="">
                        <!-- All Genre Tab -->
                        <div id="all-genre" data-tab-content
                             class="tab-content-section {% if not selected_genre %}active{% endif %}">
                            <div class="row">
                                {% for book in books %}
                                    <div class="col-md-3">
                                        <div class="product-item">
                                            <figure class="product-style">
                                                {% if book.image %}
                                                    <img src="{{ book.image.url }}" alt="{{ book.title }}"
                                                         class="product-item">
                                                {% else %}
                                                    <img src="{% static 'images/default-book.png' %}"
                                                         alt="No image available" class="product-item">
                                                {% endif %}
                                                <div class="action-buttons">
                                                    {% if book.status != 'sold' %}
                                                        <button class="add-to-cart"
                                                                data-book-id="{{ book.book_id }}"
                                                                data-csrf="{{ csrf_token }}"
                                                                data-url="{% url 'library:add_to_cart' 0 %}">
                                                            <i class="bi bi-cart-plus"></i> افزودن به سبد
                                                        </button>
                                                    {% else %}
                                                        <div class="out-of-stock"
                                                             style="display: flex; align-items: center; justify-content: center; gap: 5px;">
                                                            <i class="bi bi-x-circle"></i>
                                                            <span>موجود نیست</span>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            </figure>
                                            <figcaption>
                                                <h3>{{ book.title }}</h3>
                                                <span>{{ book.author }}</span>
                                                <br>
                                                {% if book.discounted_price and book.discounted_price < book.price %}
                                                    <span class="prev-price">${{ book.price }}</span>
                                                    ${{ book.discounted_price }}
                                                    <span class="discount-badge">-{{ book.discount_percentage }}%</span>
                                                {% else %}
                                                    ${{ book.price }}
                                                {% endif %}
                                            </figcaption>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- Genre Tabs Content (Dynamic) -->
                        {% for genre in genres %}
                            <div id="{{ genre.name|slugify }}" data-tab-content
                                 class="tab-content-section {% if selected_genre == genre.name %}active{% endif %}">
                                <div class="row">
                                    {% for book in books %}
                                        {% if book.genre.name == genre.name %}
                                            <div class="col-md-3">
                                                <div class="product-item">
                                                    <figure class="product-style">
                                                        <img src="{{ book.image.url }}" alt="{{ book.title }}"
                                                             class="product-item">
                                                        <div class="action-buttons">
                                                            {% if book.status != 'sold' %}
                                                                <button class="add-to-cart"
                                                                        data-book-id="{{ book.book_id }}"
                                                                        data-csrf="{{ csrf_token }}"
                                                                        data-url="{% url 'library:add_to_cart' 0 %}">
                                                                    <i class="bi bi-cart-plus"></i> افزودن به سبد
                                                                </button>
                                                            {% else %}
                                                                <div class="out-of-stock"
                                                                     style="display: flex; align-items: center; justify-content: center; gap: 5px;">
                                                                    <i class="bi bi-x-circle"></i>
                                                                    <span>موجود نیست</span>
                                                                </div>
                                                            {% endif %}
                                                        </div>
                                                    </figure>
                                                    <figcaption>
                                                        <h3>{{ book.title }}</h3>
                                                        <span>{{ book.author }}</span>
                                                        {% if book.discounted_price and book.discounted_price < book.price %}
                                                            <span class="prev-price">${{ book.price }}</span>
                                                            ${{ book.discounted_price }}
                                                            <span class="discount-badge">-{{ book.discount_percentage }}%</span>
                                                        {% else %}
                                                            ${{ book.price }}
                                                        {% endif %}
                                                    </figcaption>
                                                </div>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </form>
                </div> <!-- End tab-content -->
            </div>
        </div>
    </div>
</section>

<section id="quotation" class="align-center pb-5 mb-5">
    <div class="inner-content">
        <h2 class="section-title divider">Quote of the day</h2>
        <blockquote data-aos="fade-up">
            <q>“{{ random_quote.qoute_of_day }}”</q>
            <div class="author-name">{{ random_quote.qoute_author }}</div>
        </blockquote>
    </div>
</section>

<section id="special-offer" class="bookshelf pb-5 mb-5">
    <div class="section-header align-center">
        <div class="title">
            <span>Grab your opportunity</span>
        </div>
        <h2 class="section-title">Books with offer</h2>
    </div>

    <div class="container">
        <div class="row">
            <div class="inner-content">
                <div class="product-list" data-aos="fade-up">
                    <div class="grid product-grid">
                        {% for book in books %}
                            <div class="product-item">
                                <figure class="product-style">
                                    <img src="{{ book.image.url }}" alt="{{ book.title }}" class="product-item">
                                    <div class="action-buttons">
                                        {% if book.status != 'sold' %}
                                            <button class="add-to-cart"
                                                    data-book-id="{{ book.book_id }}"
                                                    data-csrf="{{ csrf_token }}"
                                                    data-url="{% url 'library:add_to_cart' 0 %}">
                                                <i class="bi bi-cart-plus"></i> افزودن به سبد
                                            </button>
                                        {% else %}
                                            <div class="out-of-stock"
                                                 style="display: flex; align-items: center; justify-content: center; gap: 5px;">
                                                <i class="bi bi-x-circle"></i>
                                                <span>موجود نیست</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </figure>
                                <figcaption>
                                    <h3>{{ book.title }}</h3>
                                    <span>{{ book.author }}</span>
                                    <div class="item-price">
                                        {% if book.discounted_price and book.discounted_price < book.price %}
                                            <span class="prev-price">${{ book.price }}</span>
                                            ${{ book.discounted_price }}
                                            <span class="discount-badge">-{{ book.discount_percentage }}%</span>
                                        {% else %}
                                            ${{ book.price }}
                                        {% endif %}
                                    </div>
                                </figcaption>
                            </div>
                        {% endfor %}
                    </div><!--grid-->
                </div>
            </div><!--inner-content-->
        </div>
    </div>
</section>


<!-- jQuery -->
{% include 'footer_refrences.html' %}

</body>

</html>






